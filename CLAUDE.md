# 出勤支援アプリ - プロジェクトルール

## 絶対ルール

### 1. パフォーマンス最優先
**アプリとGASの読み込み・書き出し速度を何より優先する**
- 一括取得・一括書き込みを使用
- ループ内でのgetRange/setValueを避ける
- 不要なAPI呼び出しを避ける

### 2. GASファイル編集ルール
- **編集対象**: `assets/gas/gas_code_v4.js`
- **編集禁止**: ルート直下の `gas_code_v4.js`, `master_gas_code_*.js` は**バックアップ専用**

---

## 詳細ドキュメント
シート構成・プルダウン設定・進捗状況は `claudedocs/PROJECT_SUMMARY.md` を参照

---

## シート構成（概要）

### 全権管理者シート - 施設マスタ
A:施設ID, B:施設名, C:管理者名, D:メール, E:パスワード, F:スプレッドシートID, G:年度, H:作成日時, I:更新日時, J:ステータス, **K:ChatWork APIキー**, L:フォルダID, M:住所, N:電話, O:契約開始, P:契約終了, Q:定員, R:テンプレートID, S:GAS URL, T:時間設定, U:施設コード, V:施設パスワード

### マスタ設定シート
- 利用者（8行目〜）: C:名前, D:フリガナ, E:契約状態, F〜L:曜日別予定
- 職員（8行目〜）: V:名前, W:権限, X:メール, Y:パスワード, Z:職種
- プルダウン: 8〜17行(体調・睡眠), 31〜40行(疲労・ストレス), 44〜55行(曜日予定), 44〜50行L〜S列(名簿用)

### 支援記録_2025シート
A:日時, B:利用者名, C:予定, D:出欠, E:AM業務, F:PM業務, G:業務連絡, H:体調, I:睡眠, J:出勤コメント, K:疲労, L:ストレス, M:退勤コメント, N-O:予備, P:開始時刻, Q:終了時刻, R:昼休憩, S:15分休憩, T:他休憩, U:実労時間, V:食事, W:欠席対応, X:訪問, Y:送迎, Z:状況, AA:勤務地, AB:記録者, AC:予備, AD:在宅評価, AE:施設外評価, AF:目標, AG:勤務評価, AH:就労評価, AI:意欲, AJ:通信対応, AK:評価, AL:感想

### 名簿_2025シート
A:人数, B:氏名, C:カナ, D:年齢, E:ステータス, F:携帯, **G:ChatWorkルームID**, H:mail, I〜BH:詳細情報

---

## 現在の進行中タスク

### Chatwork一斉送信機能
- [x] Flutter画面作成済み
- [x] メニュー追加済み
- [x] サービスメソッド追加済み
- [ ] `assets/gas/gas_code_v4.js` にエンドポイント追加が必要
