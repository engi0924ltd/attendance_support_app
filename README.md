# B型施設 支援者サポートアプリ

就労継続支援B型事業所向けの勤怠・支援記録管理アプリ（Flutter版）

## 概要

このアプリは以下の機能を提供します：

- **利用者向け機能**：出勤・退勤の記録、体調や業務の入力
- **支援者向け機能**：利用者の勤怠確認、支援記録の入力、評価管理
- **データ管理**：Googleスプレッドシートでクラウド一元管理

## 現在の実装状況（Phase 1）

### ✅ 完成した機能
- メニュー選択画面（利用者/支援者の選択）
- 利用者向け機能：
  - 名前選択画面
  - 出勤登録画面
- 支援者向け機能：
  - ログイン画面
  - 本日の出勤一覧表示

### 🚧 今後実装予定（Phase 2以降）
- 退勤登録機能
- 勤怠編集機能（支援者用）
- 支援記録入力機能
- 出勤履歴表示
- 年度切替機能

## セットアップ手順

### 1. 必要なもの
- Flutter SDK（3.0以上）
- Android Studio または Xcode
- Googleスプレッドシート
- Google Apps Script

### 2. アプリの準備

#### (1) パッケージのインストール
```bash
cd "B型施設　支援者サポートアプリ"
flutter pub get
```

#### (2) API URL の設定
`lib/config/api_config.dart` を開いて、Google Apps ScriptのURLを設定してください：

```dart
static const String baseUrl = 'https://script.google.com/macros/s/【あなたのスクリプトID】/exec';
```

### 3. Googleスプレッドシートの準備

#### (1) スプレッドシートの作成
新しいGoogleスプレッドシートを作成し、以下のシートを追加：
- `マスタ設定`
- `勤怠_2025`（年度は適宜変更）
- `支援記録_2025`（年度は適宜変更）

#### (2) マスタ設定シートの構成

**利用者マスタ**（A列〜F列）
```
| ID | 利用者名 | フリガナ | 状態 | 登録日 | 備考 |
|----|----------|----------|------|--------|------|
| 1  | 山田太郎 | ヤマダタロウ | 在籍 | 2025-04-01 | - |
```

**職員マスタ**（A列〜G列）
```
| ID | 職員名 | メールアドレス | エイリアス1 | エイリアス2 | 状態 | 権限 |
|----|--------|----------------|-------------|-------------|------|------|
| 1  | 佐藤花子 | sato@example.com | - | - | 在職 | 支援員 |
```

**プルダウン選択肢マスタ**（A列〜D列）
```
| カテゴリ | 選択肢 | 表示順 | 有効/無効 |
|----------|--------|--------|-----------|
| 利用予定 | 通常利用 | 1 | 有効 |
| 利用予定 | 在宅利用 | 2 | 有効 |
| 出欠（内容） | 出勤 | 1 | 有効 |
| 出欠（内容） | 欠勤 | 2 | 有効 |
| 本日の体調 | 良好 | 1 | 有効 |
| 本日の体調 | やや不調 | 2 | 有効 |
| 睡眠状況 | 十分 | 1 | 有効 |
| 睡眠状況 | 不足 | 2 | 有効 |
| 特記事項 | なし | 1 | 有効 |
```

**担当業務マスタ**（A列〜E列）
```
| ID | 業務名 | カテゴリ | 表示順 | 有効/無効 |
|----|--------|----------|--------|-----------|
| 1  | 軽作業 | 共通 | 1 | 有効 |
| 2  | 梱包作業 | 共通 | 2 | 有効 |
```

#### (3) 勤怠シートの構成
仕様書通りにD列〜AF列を作成してください。

### 4. Google Apps Scriptの作成

スプレッドシートで「拡張機能」→「Apps Script」を開き、以下のコードを追加：

```javascript
// 後日、GASコードを提供予定
```

### 5. アプリの起動

```bash
flutter run
```

## 使い方

### 利用者として使う場合
1. アプリを起動
2. 「利用者メニュー」をタップ
3. 自分の名前を選択
4. 必要事項を入力して「出勤する」をタップ

### 支援者として使う場合
1. アプリを起動
2. 「支援者メニュー」をタップ
3. メールアドレスを入力してログイン
4. 本日の出勤一覧を確認

## トラブルシューティング

### 「通信エラー」が出る
- インターネット接続を確認してください
- `lib/config/api_config.dart` のURLが正しいか確認してください

### 利用者名が表示されない
- マスタ設定シートに利用者が登録されているか確認してください
- 状態が「在籍」になっているか確認してください

### ログインできない
- メールアドレスが職員マスタに登録されているか確認してください
- エイリアスを含めて確認してください

## 開発者向け情報

### ディレクトリ構成
```
lib/
├── main.dart                 # アプリの起動ポイント
├── config/                   # 設定ファイル
├── models/                   # データの形（モデル）
├── services/                 # 通信機能
├── screens/                  # 画面
│   ├── common/              # 共通画面
│   ├── user/                # 利用者向け画面
│   └── staff/               # 支援者向け画面
└── widgets/                 # 再利用できる部品（今後追加予定）
```

### 次のフェーズで実装予定
- Phase 2：退勤機能、勤怠編集機能
- Phase 3：支援記録入力機能
- Phase 4：履歴表示・検索機能
- Phase 5：アラーム機能、年度切替

## ライセンス

このプロジェクトは就労継続支援B型事業所専用です。

## サポート

質問や不具合がある場合は、開発者にお問い合わせください。
